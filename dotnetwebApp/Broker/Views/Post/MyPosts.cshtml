@using Broker.ViewModels
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@model FilteredPostViewModel;
@{
    Pagination pager = new Pagination();
   
    if(ViewBag.Pager != null)
    {
        pager = ViewBag.Pager;
    }
}
<link href="@Url.Content("~/css/UserPostPage.css")" rel="stylesheet" type="text/css" />

 <div id="products-container" class="products-container">
        @foreach (var post in @Model.FilteredPosts)
        {
            int index = @Model.FilteredPosts.IndexOf(post) + 1;
            <div class="product" data-name="p-@index">
                <img src="~/Assets/Images/grid1.jpg" alt="">
                <h3>@post.Title</h3>
                <div class="price">@post.Price</div>
            </div>
        }
 </div>

 <div class="container">


    @if(pager.TotalPages > 0)
    {
        <ul class="pagination justify-content-center"> 

     @if(pager.CurrentPage > 1)
    {
        <li class="page-item ">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-category=@Model.Category asp-route-pg="1">First</a>
                </li>
                <li class="page-item ">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-category=@Model.Category asp-route-pg="@(pager.CurrentPage - 1)">Previous</a>
                </li>
    }

            @for (var page = pager.StartPage; page <= pager.EndPage; page++)
            {
                <li class="page-item @(page == pager.CurrentPage ? "active" : "")">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-category=@Model.Category asp-route-pg="@(page)">@(page)</a>
                </li>
            }

                @if(pager.CurrentPage < pager.TotalPages)
    {
        <li class="page-item ">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-pg="@(pager.CurrentPage + 1)">Next</a>
                </li>
                <li class="page-item ">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-pg="@(pager.TotalPages)">Last</a>
                </li>
    }

        </ul>
    }


</div>
