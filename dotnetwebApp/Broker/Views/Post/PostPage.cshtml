@using Broker.ViewModels
@model FilteredPostViewModel;
@{
    Pagination pager = new Pagination();
   
    if(ViewBag.Pager != null)
    {
        pager = ViewBag.Pager;
    }
}

<link href="@Url.Content("~/css/UserPostPage.css")" rel="stylesheet" type="text/css" />



<div class="container">

    <div class="search-products">
        <form class="search-form" method='get' asp-action="PostPage">
          

            <select id="select-category" name='category'>
               <option value="">Select Category</option>
                @foreach(var cat in Model.FilteredCategories)
                {
       <option selected="@(Model.Category == @cat.CategoryName)" value="@cat.CategoryName">@cat.CategoryName</option>             
                }
            </select>

            
            <select id="select-city" name='city'>
                <option value="">Select City</option>
                <option value="Prishtine">Prishtine</option>
                <option value="Gjakove">Gjakove</option>
                <option value="Gjilan">Gjilan</option>
                <option value="Ferizaj">Ferizaj</option>
            </select>

             <input id="btn-submit" type='submit' value='Search' />
        </form>

    </div>

    <div id="products-container" class="products-container">
        @foreach (var post in @Model.FilteredPosts)
        {
            int index = @Model.FilteredPosts.IndexOf(post) + 1;
            <div class="product" data-name="p-@index">
                <img src="~/Assets/Images/grid1.jpg" alt="">
                <h3>@post.Title</h3>
                <div class="price">$110,000</div>
               <div class="postOptions">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-badge-ad-fill" viewBox="0 0 16 16">
                     <path d="M11.35 8.337c0-.699-.42-1.138-1.001-1.138-.584 0-.954.444-.954 1.239v.453c0 .8.374 1.248.972 1.248.588 0 .984-.44.984-1.2v-.602zm-5.413.237-.734-2.426H5.15l-.734 2.426h1.52z"/>
                     <path d="M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2zm6.209 6.32c0-1.28.694-2.044 1.753-2.044.655 0 1.156.294 1.336.769h.053v-2.36h1.16V11h-1.138v-.747h-.057c-.145.474-.69.804-1.367.804-1.055 0-1.74-.764-1.74-2.043v-.695zm-4.04 1.138L3.7 11H2.5l2.013-5.999H5.9L7.905 11H6.644l-.47-1.542H4.17z"/>
                   </svg>
                   <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-archive-fill" viewBox="0 0 16 16">
                     <path d="M12.643 15C13.979 15 15 13.845 15 12.5V5H1v7.5C1 13.845 2.021 15 3.357 15h9.286zM5.5 7h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zM.8 1a.8.8 0 0 0-.8.8V3a.8.8 0 0 0 .8.8h14.4A.8.8 0 0 0 16 3V1.8a.8.8 0 0 0-.8-.8H.8z"/>
                  </svg>
                   <svg class="opt2" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
                     <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>
                   </svg>
                   <svg class="opt1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                     <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"/>
                   </svg>
               </div>
          </div>
        }


        @* <div class="product" data-name="p-1">
            <img src="~/Assets/ImagePostPage/house1.jpg" alt="">
            <h3>House 1</h3>
            <div class="price">$110,000</div>
            </div>

            <div class="product" data-name="p-2">
            <img src="~/Assets/ImagePostPage/house2.jpg" alt="">
            <h3>House 2</h3>
            <div class="price">$80,000</div>
            </div>

            <div class="product" data-name="p-3">
            <img src="~/Assets/ImagePostPage/house3.jpg" alt="">
            <h3>House 3</h3>
            <div class="price">$100,000</div>
            </div>

            <div class="product" data-name="p-4">
            <img src="~/Assets/ImagePostPage/house4.jpg" alt="">
            <h3>House 4</h3>
            <div class="price">$90,000</div>
            </div>

            <div class="product" data-name="p-5">
            <img src="~/Assets/ImagePostPage/house5.jpg" alt="">
            <h3>House 5</h3>
            <div class="price">$200,000</div>
            </div>

            <div class="product" data-name="p-6">
            <img src="~/Assets/ImagePostPage/house6.jpg" alt="">
            <h3>House 6</h3>
            <div class="price">$150,000</div>
            </div>*@

    </div>

</div>

<div class="products-preview">

    @*<div class="preview" data-target="p-1">
        <i class="fas fa-times"></i>
        <img src="~/Assets/ImagePostPage/house1.jpg" alt="">
        <h3>House 1</h3>
        <div class="stars">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <span>( 250 )</span>
        </div>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequatur, dolorem.</p>
        <h3>Alban Selmanaj</h3>
        <div class="price">$110,000</div>
        <div class="buttons">
        <a href="#" class="buy">contact agent</a>
        <a href="#" class="cart">schedule tour</a>
        </div>
        </div>

        <div class="preview" data-target="p-2">
        <i class="fas fa-times"></i>
        <img src="~/Assets/ImagePostPage/house2.jpg" alt="">
        <h3>House 2</h3>
        <div class="stars">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <span>( 250 )</span>
        </div>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequatur, dolorem.</p>
        <h3>Adhurim Krasniqi</h3>
        <div class="price">$80,000</div>
        <div class="buttons">
        <a href="#" class="buy">contact agent</a>
        <a href="#" class="cart">schedule tour</a>
        </div>
        </div>

        <div class="preview" data-target="p-3">
        <i class="fas fa-times"></i>
        <img src="~/Assets/ImagePostPage/house3.jpg" alt="">
        <h3>House 3</h3>
        <div class="stars">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <span>( 250 )</span>
        </div>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequatur, dolorem.</p>
        <h3>Lir Ballata</h3>
        <div class="price">$100,000</div>
        <div class="buttons">
        <a href="#" class="buy">contact agent</a>
        <a href="#" class="cart">schedule tour</a>
        </div>
        </div>

        <div class="preview" data-target="p-4">
        <i class="fas fa-times"></i>
        <img src="~/Assets/ImagePostPage/house4.jpg" alt="">
        <h3>House 4</h3>
        <div class="stars">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <span>( 250 )</span>
        </div>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequatur, dolorem.</p>
        <h3>Qendrim Sadrija</h3>
        <div class="price">$90,000</div>
        <div class="buttons">
        <a href="#" class="buy">contact agent</a>
        <a href="#" class="cart">schedule tour</a>
        </div>
        </div>

        <div class="preview" data-target="p-5">
        <i class="fas fa-times"></i>
        <img src="~/Assets/ImagePostPage/house5.jpg" alt="">
        <h3>House 5</h3>
        <div class="stars">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <span>( 250 )</span>
        </div>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequatur, dolorem.</p>
        <h3>Bleona Curri</h3>
        <div class="price">$200,000</div>
        <div class="buttons">
        <a href="#" class="buy">contact agent</a>
        <a href="#" class="cart">schedule tour</a>
        </div>
        </div>

        <div class="preview" data-target="p-6">
        <i class="fas fa-times"></i>
        <img src="~/Assets/ImagePostPage/house6.jpg" alt="">
        <h3>House 6</h3>
        <div class="stars">
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star"></i>
        <i class="fas fa-star-half-alt"></i>
        <span>( 250 )</span>
        </div>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Consequatur, dolorem.</p>
        <h3>Ibrahim Ejupi</h3>
        <div class="price">$150,000</div>
        <div class="buttons">
        <a href="#" class="buy">contact agent</a>
        <a href="#" class="cart">schedule tour</a>
        </div>
        </div>*@

</div>

<div class="container">


    @if(pager.TotalPages > 0)
    {
        <ul class="pagination justify-content-center"> 

     @if(pager.CurrentPage > 1)
    {
        <li class="page-item ">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-category=@Model.Category asp-route-pg="1">First</a>
                </li>
                <li class="page-item ">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-category=@Model.Category asp-route-pg="@(pager.CurrentPage - 1)">Previous</a>
                </li>
    }

            @for (var page = pager.StartPage; page <= pager.EndPage; page++)
            {
                <li class="page-item @(page == pager.CurrentPage ? "active" : "")">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-category=@Model.Category asp-route-pg="@(page)">@(page)</a>
                </li>
            }

                @if(pager.CurrentPage < pager.TotalPages)
    {
        <li class="page-item ">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-pg="@(pager.CurrentPage + 1)">Next</a>
                </li>
                <li class="page-item ">
                    <a class="page-link" asp-controller="Post" asp-action="PostPage" asp-route-pg="@(pager.TotalPages)">Last</a>
                </li>
    }

        </ul>
    }


</div>


<script src="@Url.Content("~/js/UserPostPage.js")"></script>
